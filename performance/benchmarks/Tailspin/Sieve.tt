import 'harness'

templates sieve
  def size: $it;
  @: {primeCount: 0, flags: [ 1..$size -> 1 ]};
  2..$size -> #
  $@.primeCount !
  <?($@.flags($it) <1>)>
    @.primeCount: $@.primeCount + 1;
    $it+$it..$size:$it -> (@sieve.flags($it): 0;) -> void
end sieve

templates runAndVerify
  5000 -> sieve -> #
  <669> 1 !
  <> 0 !
end runAndVerify

1 -> harness/run@{name: 'List', benchmark:runAndVerify} -> void
